# libica

[![Pull Request Build Status](https://github.com/umccr/libica/workflows/Pull%20Request%20Build/badge.svg)](https://github.com/umccr/libica/actions) 
[![PyPI - Downloads](https://img.shields.io/pypi/dm/libica?style=flat)](https://pypistats.org/packages/libica) 
[![PyPI](https://img.shields.io/pypi/v/libica?style=flat)](https://pypi.org/project/libica) 
[![PyPI - License](https://img.shields.io/pypi/l/libica?style=flat)](https://opensource.org/licenses/MIT)

Python SDK to programmatically call Illumina Connected Analytics (ICA) Genomic (multi-omics) data platform and BioInformatics web services.

- ICA API: https://help.ica.illumina.com/reference/r-api
- Install through ``pip`` like so:
```commandline
pip install libica
```

## Overview

- Tested for Python 3.8, 3.9, 3.10, 3.11, 3.12, 3.13
- [Test Coverage](https://umccr.github.io/libica/coverage/)
- SDK Guide: [PyDoc](https://umccr.github.io/libica/libica/)
- User Guide: https://umccr.github.io/libica/

## Roadmap

- See [changelog](https://github.com/umccr/libica/blob/main/CHANGELOG.md) and [closed milestones](https://github.com/umccr/libica/milestones?state=closed)
- See opening [milestones](https://github.com/umccr/libica/milestones) for current planning and next SDK release

## Example

- See [examples](https://github.com/umccr/libica/tree/main/examples) directory for some example scripts
- See [wrapica](https://github.com/umccr/wrapica) and [icav2-cli-plugins](https://github.com/umccr/icav2-cli-plugins) for client application that build on top of SDK

## Development

- Setup virtual environment and activate it

- Install dev dependencies
```commandline
make install
```

- To bring up _mock_ API
```commandline
make up
```

- To run tests suites
```commandline
make unit
make autounit
```

- To run full suite, smoke test
```commandline
make test
```

### AutoGen Workflow

- SDK is autogenerated from OpenAPI definitions
- There are few tools required for this autogen workflow to work.
    1. [openapi-generator-cli](https://github.com/OpenAPITools/openapi-generator-cli) -- used to generate code and doc
    2. [redocly/cli](https://github.com/Redocly/redocly-cli) -- validate definitions
- Toolchains are as follows.
```commandline
node -v
v20.19.2

npm install

npx openapi-generator-cli help
npx redocly lint --help
```
- API mock server `prism` is set up through docker compose as follows.

```
docker --version
Docker version 28.1.1, build 4eba377
```

```
make up
make ps
make test_icav2_mock
docker compose logs
```
- All the autogen config and arrangement refer to [`syncapi2.sh`](https://github.com/umccr/libica/blob/main/syncapi2.sh) which is called through [`Makefile`](https://github.com/umccr/libica/blob/main/Makefile) targets.

#### Generator Version

- See generator [version compatibility](https://github.com/OpenAPITools/openapi-generator#11---compatibility)
- Select generator version as follows:

```
npx openapi-generator-cli version-manager list
```

## Notice

- MIT License and DISCLAIMER
- [The Advanced Genomics Collaboration (TAGC)](https://www.tagcaustralia.com)
